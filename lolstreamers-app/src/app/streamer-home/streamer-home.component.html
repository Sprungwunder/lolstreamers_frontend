<section class="streamer-home">
  <section class="search">
    <form [formGroup]="inputForm" (ngSubmit)="handleSubmit()" (keydown.enter)="$event.preventDefault()">
      <div class="form-group" *ngIf="isAdmin">
        <label for="youtubeUrl">YouTube URL*</label>
        <div class="selected-items"></div>
        <input
          id="youtubeUrl"
          type="url"
          formControlName="youtubeUrl"
          placeholder="Enter YouTube Video Link"
          (blur)="onYoutubeUrlChange($event)"
          (input)="onYoutubeUrlChange($event)"
        />
        <div
          class="error-message"
          *ngIf="inputForm.get('youtubeUrl')?.invalid && inputForm.get('youtubeUrl')?.touched"
        >
          Please provide a valid YouTube URL.
        </div>

        <!-- Duplicate warning section -->
        <div class="duplicate-warning" *ngIf="showDuplicateWarning && duplicateVideos.length > 0">
          <div class="warning-header">
            ⚠️ Warning: Similar videos found!
          </div>
          <div class="duplicate-videos-list">
            <div *ngFor="let video of duplicateVideos" class="duplicate-video-item">
              <div class="video-info">
                <strong>{{ video.streamer }}</strong> - {{ video.champion }}
                <span *ngIf="video.lane"> ({{ video.lane }})</span>
              </div>
              <div class="video-link">
                <a [href]="getYouTubeVideoLink(video)" target="_blank" rel="noopener noreferrer">
                  View on YouTube
                </a>
              </div>
            </div>
          </div>
        </div>
      </div>

      <div *ngIf="!isAdmin">
        <app-streamer-input
          [streamerList]="streamerList"
          (streamerChange)="handleStreamerChange($event)">
        </app-streamer-input>
      </div>

      <!-- Champion Name -->
      <app-champion-name-input
        [championsList]="championsList"
        [isAdmin]="isAdmin"
        (championsChange)="handleChampionChange($event)">
      </app-champion-name-input>

      <!-- Enemy Champion Name -->
      <app-enemy-champion-name-input
        [enemyChampionsList]="enemyChampionsList"
        [isAdmin]="isAdmin"
        (enemyChampionsChange)="handleEnemyChampionChange($event)">
      </app-enemy-champion-name-input>

      <app-lane-input
        [lanesList]="lanesList"
        [isAdmin]="isAdmin"
        (lanesChange)="handleLanesChange($event)">
      </app-lane-input>

      <!-- Runes search -->
      <app-runes-input
        [runesList]="runesList"
        (runesChange)="handleRunesChange($event)">
      </app-runes-input>


      <!-- Champion Items -->
      <app-items-input
        [itemsList]="itemsList"
        (itemsChange)="handleItemsChange($event)">
      </app-items-input>

      <!-- Team Champions -->
      <app-team-champions-input
        [teamChampionsList]="teamChampionsList"
        (teamChampionsChange)="handleTeamChampionsChange($event)">
      </app-team-champions-input>

      <!-- enemy Champions -->
      <app-enemy-team-champions-input
        [enemyTeamChampionsList]="enemyTeamChampionsList"
        (enemyTeamChampionsChange)="handleEnemyTeamChampionsChange($event)">
      </app-enemy-team-champions-input>

      <button
        type="button"
        class="primary"
        [disabled]="isSearching"
        [class.loading]="isSearching"
        (click)="handleSubmit()"
      >
        {{ buttonText }}
        <span *ngIf="isSearching" class="loading-spinner"></span>
      </button>
    </form>
  </section>
  <section class="results" *ngIf="!isAdmin">
    <app-video-card
      *ngFor="let video of filteredVideoList"
      [video]="video"
      (videoDeleted)="onVideoDeleted($event)"
      (videoActivated)="onVideoActivated($event)"
    ></app-video-card>
  </section>
</section>

